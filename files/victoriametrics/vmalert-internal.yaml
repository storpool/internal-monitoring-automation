apiVersion: operator.victoriametrics.com/v1beta1
kind: VMAlert
metadata:
  name: internal
  namespace: internal-monitoring
spec:
  datasource:
    url: http://vmsingle-metrics:8429
  evaluationInterval: 3s
  notifiers:
  - url: http://vmalertmanager-internal-0.vmalertmanager-internal:9093
  - url: http://vmalertmanager-internal-1.vmalertmanager-internal:9093
  remoteWrite:
    url: http://vmsingle-metrics:8429
  replicaCount: 2
  ruleNamespaceSelector:
    matchExpressions:
    - key: storpool.com/kind
      operator: In
      values:
      - service
      - system
  ruleSelector:
    matchLabels:
      storpool.com/env: production
  selectAllByDefault: true
